# ü§õüèæ SSO Authenticationü§úüèæ

‡πÄ‡∏õ‡πá‡∏ô Service ‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏Ñ‡πà‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏∞‡∏ö‡∏ö ‡πÇ‡∏î‡∏¢‡∏ó‡∏≤‡∏á Service ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏î‡πâ‡∏≤‡∏ô 
  - Authentication Service
    - with saml2.0 standard
  - Register User Service
  - Collect User info to Database
    - may be use sqlite
  - Generate Token
    - use jwt token

## SSO Flow Diagram
![SSoFlowDiagram](/resource/saml2.0.png)



## Dependencies ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```xml
    
	<dependencies>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-security</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-web</artifactId>
		</dependency>
		<dependency>
			<groupId>org.apache.httpcomponents</groupId>
			<artifactId>httpclient</artifactId>
			<version>4.5.10</version>
		</dependency>
		<dependency>
			<groupId>org.opensaml</groupId>
			<artifactId>opensaml-core</artifactId>
			<version>3.4.3</version>
		</dependency>
		<dependency>
			<groupId>org.opensaml</groupId>
			<artifactId>opensaml-saml-impl</artifactId>
			<version>3.4.3</version>
		</dependency>
		<dependency>
			<groupId>org.opensaml</groupId>
			<artifactId>opensaml-saml-api</artifactId>
			<version>3.4.3</version>
		</dependency>
		<dependency>
			<groupId>javax.xml.bind</groupId>
			<artifactId>jaxb-api</artifactId>
			<version>2.3.1</version>
		</dependency>
		<dependency>
			<groupId>org.bouncycastle</groupId>
			<artifactId>bcpkix-jdk15on</artifactId>
			<version>1.64</version>
		</dependency>
		<dependency>
			<groupId>org.bouncycastle</groupId>
			<artifactId>bcprov-jdk15on</artifactId>
			<version>1.64</version>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-test</artifactId>
			<scope>test</scope>
			<exclusions>
				<exclusion>
					<groupId>org.junit.vintage</groupId>
					<artifactId>junit-vintage-engine</artifactId>
				</exclusion>
			</exclusions>
		</dependency>
		<dependency>
			<groupId>org.springframework.security</groupId>
			<artifactId>spring-security-test</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-thymeleaf</artifactId>
		</dependency>
	</dependencies>
```

### üíÅüèª‚Äç‚ôÇÔ∏è When you want to use service you focus on sp directory

```
sp
‚îÇ   .mvn
‚îÇ   .DS_Store   
‚îÇ   .gitignore
|   mvnw
|   mvnw.cmd
|   pom.xml
|
‚îî‚îÄ‚îÄ‚îÄsrc
‚îÇ   ‚îÇ   .DS_Store
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ‚îÄmain
‚îÇ       ‚îÇ   file111.txt
‚îÇ       ‚îÇ   file112.txt
|       ‚îî‚îÄ‚îÄ‚îÄjava
|       |   ‚îî‚îÄ‚îÄ‚îÄcom/saml/sp
|       |       ‚îî‚îÄ‚îÄ‚îÄconfig
|       |       |   |   AppConfig.java
|       |       |   |   BeanConfig.java
|       |       |   |   SecurityConfiguration.java
|       |       ‚îî‚îÄ‚îÄ‚îÄweb
|       |       |   |   ServiceProviderController.java
|       |       |   SPApplication.java
|       |   ‚îî‚îÄ‚îÄ‚îÄorg/spring/framework/security/saml
|       ‚îî‚îÄ‚îÄ‚îÄresources
|       |   ‚îî‚îÄ‚îÄ‚îÄtemplates
|       |   |   ‚îî‚îÄ‚îÄ‚îÄspi
|       |   |       |   generic-error.vm
|       |   |       |   select-provider.vm
|       |   |   |   data.html
|       |   |   |   logged-in.html
|       |   |   |   test.html
|       |   |   application.properties
|       |   |   application.yml    
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄtest/java/com/saml/sp

```

## in file SecurityConfiguration.java 
‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£ Config Authorization ‡∏ó‡∏≥‡πÉ‡∏ô file ‡∏ô‡∏µ‡πâ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô method ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Library ‡∏Ç‡∏≠‡∏á [Spring Security](https://www.baeldung.com/spring-security-expressions)
![SecurityConfig](/resource/security_config.png)




## and config application.yml in resources directory
![appConfig](/resource/application_config.png)

### in file application.yml you must modify entity-id 
  - entity-id ‡∏Ñ‡∏¥‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠ package ‡∏Ç‡∏≠‡∏á service ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏¢‡∏´‡πâ‡∏≤‡∏°‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ö service ‡∏≠‡∏∑‡πà‡∏ô‡πÄ‡∏•‡∏¢

### ‡πÄ‡∏°‡∏∑‡πà‡∏∑‡∏≠‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô entity-id ‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏´‡πâ‡∏ô‡∏≥‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÉ‡∏ô entity-id ‡∏™‡πà‡∏á‡∏°‡∏≤‡∏¢‡∏±‡∏á email ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏à‡πâ‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö
# üë•Team Member

|<a href="https://github.com/KimKosit"><img src="resource/kim.jpg" width="100px"></a>  |<a href="https://github.com/pumy2517"><img src="resource/fluke.jpg" width="100px"></a>  |<a href="https://github.com/khingbmc"><img src="resource/khing.jpg" width="100px"></a>  | <a href="https://github.com/torasann"><img src="resource/tor.jpg" width="100px"></a>  |
| :-: | :-: | :-: | :-: |
| ‡πÇ‡∏Ü‡∏©‡∏¥‡∏ï ‡πÇ‡∏Ü‡∏©‡∏¥‡∏ï‡∏®‡∏£‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏≤‡∏Å‡∏£ |‡∏û‡∏µ‡∏£‡∏û‡∏• ‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏Æ‡∏ô |‡∏£‡∏ê‡∏ô‡∏ô‡∏ó‡πå ‡∏à‡∏±‡∏ô‡∏ó‡∏ô‡∏∞‡∏™‡∏∏‡∏Ñ‡∏ô‡∏ò‡πå|‡∏£‡∏±‡∏ä‡∏†‡∏±‡∏ó‡∏£ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏π‡∏•
|60070008 |      60070067      |      60070079      | 60070083|
|    [@KimKosit](https://github.com/KimKosit)    |     [@pumy2517](https://github.com/pumy2517)     |     [@khingbmc](https://github.com/khingbmc)     | [@torasann](https://github.com/torasann) |


S
